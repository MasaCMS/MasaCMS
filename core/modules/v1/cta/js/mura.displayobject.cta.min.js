this.Mura=this.Mura||{},this.Mura.templates=this.Mura.templates||{},this.Mura.templates["cta-container"]=window.mura.Handlebars.template({compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=a.hooks.helperMissing,i=a.escapeExpression;return'<div class="mura-cta__container"\n\tdata-mura-cta-anchorx="'+i((f=null!=(f=c.anchorx||(null!=b?b.anchorx:b))?f:h,"function"==typeof f?f.call(g,{name:"anchorx",hash:{},data:e,loc:{start:{line:2,column:24},end:{line:2,column:35}}}):f))+'"\n\tdata-mura-cta-anchory="'+i((f=null!=(f=c.anchory||(null!=b?b.anchory:b))?f:h,"function"==typeof f?f.call(g,{name:"anchory",hash:{},data:e,loc:{start:{line:3,column:24},end:{line:3,column:35}}}):f))+'">\n</div>\n'},useData:!0}),this.Mura.templates["cta-instance"]=window.mura.Handlebars.template({compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=a.hooks.helperMissing,i="function",j=a.escapeExpression;return'<div id="mura-cta-'+j((f=null!=(f=c.instanceid||(null!=b?b.instanceid:b))?f:h,typeof f===i?f.call(g,{name:"instanceid",hash:{},data:e,loc:{start:{line:1,column:18},end:{line:1,column:32}}}):f))+'" class="mura-cta__item"\n\tdata-mura-cta-animate="'+j((f=null!=(f=c.animate||(null!=b?b.animate:b))?f:h,typeof f===i?f.call(g,{name:"animate",hash:{},data:e,loc:{start:{line:2,column:24},end:{line:2,column:35}}}):f))+'"\n\tdata-mura-cta-animatespeed="'+j((f=null!=(f=c.animatespeed||(null!=b?b.animatespeed:b))?f:h,typeof f===i?f.call(g,{name:"animatespeed",hash:{},data:e,loc:{start:{line:3,column:29},end:{line:3,column:45}}}):f))+'"\n\tdata-mura-cta-type="'+j((f=null!=(f=c.type||(null!=b?b.type:b))?f:h,typeof f===i?f.call(g,{name:"type",hash:{},data:e,loc:{start:{line:4,column:21},end:{line:4,column:29}}}):f))+'"\n>\n\t<div class="mura-cta__item__wrapper"\n\t\tdata-mura-cta-size="'+j((f=null!=(f=c.width||(null!=b?b.width:b))?f:h,typeof f===i?f.call(g,{name:"width",hash:{},data:e,loc:{start:{line:7,column:22},end:{line:7,column:31}}}):f))+'">\n\t\t<div class="mura-cta__item__content"></div>\n\t\t<div class="mura-cta__item__dismiss"></div>\n\t</div>\n</div>\n'},useData:!0}),this.Mura.templates.cta=window.mura.Handlebars.template({compiler:[8,">= 4.3.0"],main:function(a,b,c,d,e){return'<div class="mura-cta">\n</div>\n'},useData:!0}),Mura.DisplayObject.Cta=Mura.UI.extend({displayed:!1,delaymet:!0,stats:{visits:0,displays:0,dismissed:0},preview:!1,render:function(){this.context.scroll=parseInt(this.context.scroll)||0,this.context.delay=parseInt(this.context.delay)||0,this.context.displays=parseInt(this.context.displays)||0,this.context.visits=parseInt(this.context.visits)||0,this.context.resetinterval=this.context.resetinterval||"session",this.context.resetqty=parseInt(this.context.resetqty)||1,this.context.type=this.context.type||"modal",this.context.animatespeed=this.context.animatespeed||"fast",this.context.anchorx=this.context.anchorx||"center",this.context.anchory=this.context.anchory||"center",this.context.animate=this.context.animate||"",this.context.animatespeed=this.context.animatespeed||"fast",this.context.width=this.context.width||"md",this.context.instanceclass=this.context.instanceclass||"",this.context.eventLabel=this.context.type,this.context.statsid=this.context.statsid||this.context.instanceid||Mura.createUUID(),"modal"==this.context.type?(this.context.anchorx="center",this.context.anchory="center",this.context.animate||(this.context.animate="ttb")):"bar"==this.context.type?(this.context.anchorx="center",this.context.anchory="bottom",this.context.animate="btt"):"drawer"==this.context.type?("center"==this.context.anchorx&&(this.context.anchorx="right"),"right"==this.context.anchorx?this.context.animate="rtl":(this.context.anchorx="left",this.context.animate="ltr"),this.context.eventLabel=this.context.eventLabel+" ("+this.context.anchorx+")"):"inline"==this.context.type&&(this.context.width="full",this.context.animate="",this.context.animatespeed=""),Mura.isNumeric(this.context.scroll)||(this.context.scroll=0),Mura.isNumeric(this.context.delay)||(this.context.delay=0),Mura.isNumeric(this.context.displays)||(this.context.displays=0),Mura.isNumeric(this.context.visits)||(this.context.visits=0),Mura.isNumeric(this.context.resetqty)||(this.context.resetqty=1),void 0===this.context.dismissible&&(this.context.dismissible=0),this.context.eventLabel=this.context.type;var a=Mura(this.context.targetEl).closest(".mura-region-local");a.length&&a.data("perm")&&(Mura(this.context.targetEl).html('<div class="mura-cta-empty" data-mura-cta-type-label="'+Mura.escape(this.context.type)+'"></div>'),this.mode="editable"),this.context.preview&&(this.preview=!0,Mura(this.context.targetEl).closest(".mura-object").data("preview","")),this.initStats(),this.recordVisit(),"inline"==this.context.type||Mura(".mura-cta").length||Mura("body").append(Mura.templates.cta());var b=Mura("#mura-cta-"+this.context.instanceid);b.length&&b.find(".mura-cta__item__dismiss").trigger("click");var c=this;Mura.loader().load(Mura.corepath+"/modules/v1/cta/css/mura-cta-config.css",function(){c.context.delay&&(c.delaymet=!1,setTimeout(function(){c.delaymet=!0,c.checkRequirements()},1e3*c.context.delay)),Mura(window).on("scroll",function(){c.checkRequirements()}),c.checkRequirements()})},addTime:function(a,b,c){return b&&"session"!=b||(b="day"),c=c||1,"minute"==b?new Date(a.getTime()+6e4*c):"hour"==b?new Date(a.getTime()+60*c*6e4):"day"==b?new Date(a.getTime()+24*c*60*6e4):"week"==b?new Date(a.getTime()+7*c*24*60*6e4):"month"==b?new Date(a.getTime()+30*c*24*60*6e4):void 0},getStorage:function(){return function(){var a=window.sessionStorage;try{return a.setItem("test","1"),a.removeItem("test"),!0}catch(a){return!1}}()?"session"==this.context.resetinterval?window.sessionStorage:window.localStorage:(console.log('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.'),{})},initStats:function(){var a=this.getStorage();a[this.context.statsid]&&(this.stats=JSON.parse(a[this.context.statsid])),Mura.isNumeric(this.stats.dismissed)||(this.stats.dismissed=0),Mura.isNumeric(this.stats.visits)||(this.stats.visits=0),Mura.isNumeric(this.stats.displays)||(this.stats.displays=0),"string"==typeof this.stats.expires?(this.stats.expires=new Date(this.stats.expires),this.stats.expires.getTime()<(new Date).getTime()&&(this.stats={visits:0,displays:0,dismissed:0,expires:this.addTime(new Date,this.context.resetinterval,this.context.resetqty)},this.saveStats())):(this.stats.expires=this.addTime(new Date,this.context.resetinterval,this.context.resetqty),this.saveStats())},saveStats:function(){this.getStorage()[this.context.statsid]=JSON.stringify(this.stats)},clearStats:function(){this.stats={visits:0,displays:0,dismissed:0},this.saveStats()},recordVisit:function(){this.stats.visits++,this.saveStats()},recordDisplay:function(){this.stats.displays++,this.saveStats()},display:function(){if(!this.displayed){this.displayed=!0;var a=Mura("#mura-cta-"+this.context.instanceid);if(a.length&&a.find(".mura-cta__item__dismiss").trigger("click"),this.recordDisplay(),"inline"===this.context.type)Mura(this.context.targetEl).html(Mura.templates["cta-instance"](this.context));else{var b=Mura('.mura-cta__container[data-mura-cta-anchorx="'+this.context.anchorx+'"][data-mura-cta-anchory="'+this.context.anchory+'"]');b.length||(Mura(".mura-cta").append(Mura.templates["cta-container"](this.context)),b=Mura('.mura-cta__container[data-mura-cta-anchorx="'+this.context.anchorx+'"][data-mura-cta-anchory="'+this.context.anchory+'"]')),b.addClass("mura-cta__container--"+this.context.type),b.append(Mura.trim(Mura.templates["cta-instance"](this.context)))}var a=Mura("#mura-cta-"+this.context.instanceid);if(this.context.instanceclass)for(var c=this.context.instanceclass.split(" "),d=0;d<c.length;d++)a.addClass(c[d]);var e=this,b=Mura(e.context.targetEl).closest(".mura-region-local");a.find(".mura-cta__item__dismiss").on("click",function(){var a=Mura(this).closest(".mura-cta__item"),c=a.closest(".mura-cta__container");a.remove(),e.context.dismissible&&(e.stats.dismissed=1,e.saveStats()),c.length&&!c.find(".mura-cta__item").length&&(c.html("").hide(),setTimeout(function(){c.show()},20)),"inline"==e.context.type&&(b.length&&b.data("perm")?Mura(e.context.targetEl).html('<div class="mura-cta-empty" data-mura-cta-type-label=""></div>'):Mura(e.context.targetEl).html(""));var d=Mura(e.context.targetEl).closest(".mura-object");d.hide(),setTimeout(function(){d.show()},20)});var f=!0;this.context.nestedobject&&"notconfigured"!=this.context.nestedobject&&(a.find('[data-ctaid="'+this.context.instanceid+'"][data-object="'+this.context.nestedobject+'"]').length||a.find(".mura-cta__item__content").appendDisplayObject({object:this.context.nestedobject,ctaid:this.context.instanceid,queue:!1}),f=!1),this.context.componentid&&"notconfigured"!=this.context.componentid&&(a.find('[data-ctaid="'+this.context.instanceid+'"][data-object="component"]').length||a.find(".mura-cta__item__content").appendDisplayObject({object:"component",objectid:this.context.componentid,ctaid:this.context.instanceid,queue:!1}),f=!1),this.context.formid&&"notconfigured"!=this.context.formid&&(a.find('[data-ctaid="'+this.context.instanceid+'"][data-object="form"]').length||a.find(".mura-cta__item__content").appendDisplayObject({object:"form",objectid:this.context.formid,ctaid:this.context.instanceid,queue:!1}),f=!1),f&&a.find(".mura-cta__item__content").html("<p>No content has been assigned.</p>"),setTimeout(function(){console.log("Mura:Render CTA"),a.addClass("mura-cta__item--active")},50),this.context.nestedobject&&"notconfigured"!=this.context.nestedobject&&(Mura.trackEvent({category:"Call to Action",action:"Impression",label:this.context.eventLabel,objectid:this.context.nestedobject,nonInteraction:!0,value:this.stats.displays}),a.on("click","a",function(a){if(e.context.dismissible&&(e.stats.dismissed=1,e.saveStats()),!Mura(this).hasClass("mura-donottrack")){var b=Mura(a.target||a.srcElement);b.attr("target")&&"_self"!=b.attr("target")||a.preventDefault(),Mura.trackEvent({category:"Call to Action",action:"Conversion",label:e.context.eventLabel,objectid:e.context.nestedobject,value:e.stats.displays}).then(function(){b.attr("target")&&"_self"!=b.attr("target")||(window.location=b.attr("href"))})}}),a.on("submit","form",function(a){e.context.dismissible&&(e.stats.dismissed=1,e.saveStats()),Mura(this).hasClass("mura-donottrack")||Mura.trackEvent({category:"Call to Action",action:"Conversion",label:e.context.eventLabel,objectid:e.context.nestedobject,value:e.stats.displays})}),a.on("formSubmit",function(a){e.context.dismissible&&(e.stats.dismissed=1,e.saveStats()),Mura(this).hasClass("mura-donottrack")||Mura.trackEvent({category:"Call to Action",action:"Conversion",label:e.context.eventLabel,objectid:e.context.nestedobject,value:e.stats.displays})})),this.context.componentid&&"notconfigured"!=this.context.componentid&&(Mura.trackEvent({category:"Call to Action",action:"Impression",objectid:this.context.componentid,label:this.context.eventLabel,nonInteraction:!0,value:this.stats.displays}),a.on("click","a",function(a){if(e.context.dismissible&&(e.stats.dismissed=1,e.saveStats()),!Mura(this).hasClass("mura-donottrack")){var b=Mura(a.target||a.srcElement);b.attr("target")&&"_self"!=b.attr("target")||a.preventDefault(),Mura.trackEvent({category:"Call to Action",action:"Conversion",label:e.context.eventLabel,objectid:e.context.componentid,value:e.stats.displays}).then(function(){b.attr("target")&&"_self"!=b.attr("target")||(window.location=b.attr("href"))})}})),this.context.formid&&"notconfigured"!=this.context.formid&&(Mura.trackEvent({category:"Call to Action",action:"Impression",label:e.context.eventLabel,objectid:e.context.formid,nonInteraction:!0,value:e.stats.displays}),a.on("submit","form",function(a){e.context.dismissible&&(e.stats.dismissed=1,e.saveStats()),Mura(this).hasClass("mura-donottrack")||(Mura.trackEvent({category:"Call to Action",action:"Conversion",label:e.context.eventLabel,objectid:e.context.formid,value:e.stats.displays}),e.context.componentid&&"notconfigured"!=e.context.componentid&&Mura.trackEvent({category:"Call to Action",action:"Conversion",label:e.context.eventLabel,objectid:e.context.componentid,value:e.stats.displays}))}),a.on("formSubmit",function(a){e.context.dismissible&&(e.stats.dismissed=1,e.saveStats()),Mura(this).hasClass("mura-donottrack")||(Mura.trackEvent({category:"Call to Action",action:"Conversion",label:e.context.eventLabel,objectid:e.context.formid,value:e.stats.displays}),e.context.componentid&&"notconfigured"!=e.context.componentid&&Mura.trackEvent({category:"Call to Action",action:"Conversion",label:e.context.eventLabel,objectid:e.context.componentid,value:e.stats.displays}))}))}},checkRequirements:function(){(this.preview||this.metDelayRequirement()&&this.metScrollRequirement()&&this.metVisitsRequirement()&&this.metDisplaysRequirement()&&(!this.context.dismissible||!this.stats.dismissed))&&this.display()},metVisitsRequirement:function(){return!this.context.visits||this.stats.visits>=this.context.visits},metDisplaysRequirement:function(){return!this.context.displays||this.context.displays>this.stats.displays},metDelayRequirement:function(){return this.delaymet},metScrollRequirement:function(){if(this.context.scroll){return(document.documentElement.scrollTop+document.body.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100>=this.context.scroll}return!0}});
function initConfigurator(t,e){return siteManager.initConfigurator(t,e)}var siteManager={formSubmitted:!1,layoutmanager:!1,fileLockConfirmed:!1,hasFileLock:!1,nodeLockConfirmed:!1,hasNodeLock:!1,dirtyRelatedContent:!1,copyContentID:"",copySiteID:"",reloadURL:"",tablist:"",ckContent:function(t){var e=!1;if(e&&($("#unlockfilewithnew").val("false"),$("#unlocknodewithpublish").val("false"),document.contentForm.cancelpendingapproval.value="false",document.contentForm.approved.value=0),"undefined"!=typeof isFormBuilder){var i=siteManager.saveFormBuilder();if(!i)return alertDialog("All fields must have a 'name' before the form can be saved."),!1}if("undefined"!=typeof document.contentForm.display)if("2"==document.contentForm.display.value){var a=$(".datepicker.mura-datepickerdisplayStart").val(),n=$(".datepicker.mura-datepickerdisplayStop").val();if(0==isDate(a,"DISPLAY START DATE"))return alertDialog("Please enter a valid date in the 'Display Start Date' field"),!1;if(""!=n&&0==isDate(n,"DISPLAY STOP DATE"))return alertDialog("Please enter a valid date in the 'Display Stop Date' field"),!1}else $(".datepicker.mura-datepickerdisplayStart").val(""),$(".datepicker.mura-datepickerdisplayStop").val(""),$("#mura-displayStart").val(""),$("#mura-displayStop").val("");if(""==document.contentForm.title.value)return"Component"==document.contentForm.type.value?(alertDialog("The form field 'Menu Title' is required"),!1):"Form"==document.contentForm.type.value?(alertDialog("The form field 'Title' is required"),!1):(alertDialog("The form field 'Long Title' is required"),!1);if("Link"==document.contentForm.type.value&&""==document.contentForm.body.value)return alertDialog("The form field 'URL' is required"),!1;if(1==document.contentForm.approved.value&&""!=t&&!confirm(t))return!1;if(!e&&"undefined"!=typeof this.hasFileLock&&!this.fileLockConfirmed&&this.hasFileLock&&""!=$("input[name='newfile']").val())return confirmDialog(this.unlockfileconfirm,function(){$("#unlockfilewithnew").val("true"),siteManager.ckContent(!1)&&(siteManager.formSubmitted=!0,document.contentForm.submit())},function(){$("#unlockfilewithnew").val("false"),siteManager.ckContent(!1)&&(siteManager.formSubmitted=!0,document.contentForm.submit())}),this.fileLockConfirmed=!0,!1;if(!e&&"undefined"!=typeof this.hasNodeLock&&this.hasNodeLock&&!this.nodeLockConfirmed)return confirmDialog(this.unlocknodeconfirm,function(){$("#unlocknodewithpublish").val("true"),siteManager.ckContent(!1)&&(siteManager.formSubmitted=!0,document.contentForm.submit())},function(){$("#unlocknodewithpublish").val("false"),siteManager.ckContent(!1)&&(siteManager.formSubmitted=!0,document.contentForm.submit())}),this.nodeLockConfirmed=!0,!1;if(!e&&0==document.contentForm.muraPreviouslyApproved.value&&1==document.contentForm.approved.value)return"undefined"!=typeof currentChangesetID&&""!=currentChangesetID?(confirmDialog(publishitemfromchangeset,function(){formSubmitted=!0,document.contentForm.submit()}),!1):"undefined"!=pendingApproval&&pendingApproval?(confirmDialog(cancelPendingApproval,function(){formSubmitted=!0,document.contentForm.cancelpendingapproval.value="true",document.contentForm.submit()},function(){formSubmitted=!0,document.contentForm.cancelpendingapproval.value="false",document.contentForm.submit()}),!1):(formSubmitted=!0,!0);if(!e)return formSubmitted=!0,!0;var o=new FormData(document.contentForm);$.ajax({url:$(document.contentForm).attr("action"),type:"post",data:o})},DHTML:document.getElementById||document.all||document.layers,lastid:"",getObj:function(t){document.getElementById?(this.obj=document.getElementById(t),this.style=document.getElementById(t).style):document.all?(this.obj=document.all[t],this.style=document.all[t].style):document.layers&&(this.obj=document.layers[t],this.style=document.layers[t])},saveFormBuilder:function(){var t=$("#mura-templatebuilder").templatebuilder("iscomplete");return t?(jQuery("#mura-templatebuilder").templatebuilder("save"),!0):!1},openNewContentMenu:function(t,e,i,a,n){return $("#newContentMenuContainer").remove(),$("body").append('<div id="newContentMenuContainer" title="Loading..." style="display:none"><div id="newContentMenu"><div class="load-inline"></div></div></div>'),$("#newContentMenuContainer").dialog({resizable:!1,modal:!0,width:552,title:newContentMenuTitle,position:getDialogPosition(),open:function(){$("#newContentMenuContainer").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>');var i="./",o="muraAction=cArch.loadnewcontentmenu&siteid="+e+"&contentid="+t+"&parentid="+a+"&topid="+a+"&ptype="+n+"&cacheid="+Math.random();$("#newContentMenuContainer .load-inline").spin(spinnerArgs2),$.get(i+"?"+o,function(t){$("#newContentMenuContainer .load-inline").spin(!1),$("#newContentMenuContainer").html(t),$("#newContentMenuContainer").dialog("option","position","center"),setToolTips(".add-content-ui")})},close:function(){$(this).dialog("destroy"),$("#newContentMenuContainer").remove()}}),!1},showMenu:function(t,e,i,a,n,o,r,s){var d=e.toLowerCase();if(window.innerHeight)var c=window.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)var c=document.documentElement.scrollTop;else if(document.body)var c=document.body.scrollTop;if(window.innerWidth)var l=window.pageXOffset;else if(document.documentElement&&document.documentElement.scrollLeft)var l=document.documentElement.scrollLeft;else if(document.body)var l=document.body.scrollLeft;var u=this.findPosX(i),p=this.findPosY(i);u+=20,document.getElementById("newZoom").style.display="none",document.getElementById("newZoomLink").style.display="none",document.getElementById("newCopy").style.display="none",document.getElementById("newCopyLink").style.display="none",document.getElementById("newCopyAllLink").style.display="none",document.getElementById("newPaste").style.display="none",document.getElementById("newPasteLink").style.display="none",document.getElementById("newContentLink").style.display="none",document.getElementById("newContent").style.display="none",document.getElementById("newZoomLink").onclick=function(){return siteManager.loadSiteManagerInTab(function(){return siteManager.loadSiteManager(r,a,"00000000000000000000000000000000000","","",s,1)}),!1},document.getElementById("newZoom").style.display="",document.getElementById("newZoomLink").style.display="","none"!=d&&(document.getElementById("newCopyLink").href="javascript:siteManager.copyThis('"+r+"', '"+a+"','false')",document.getElementById("newCopyAllLink").href="javascript:siteManager.copyThis('"+r+"', '"+a+"','true')",document.getElementById("newCopy").style.display="",document.getElementById("newCopyLink").style.display="",document.getElementById("newCopyAllLink").style.display=""),("author"==d||"editor"==d)&&(document.getElementById("newContentLink").onclick=function(){return siteManager.openNewContentMenu(a,r,n,o,s),!1},""!=this.copySiteID&&""!=this.copyContentID&&(document.getElementById("newPasteLink").href="javascript:siteManager.pasteThis('"+a+"')",document.getElementById("newPaste").style.display="",document.getElementById("newPasteLink").style.display=""),document.getElementById("newContentLink").style.display="",document.getElementById("newContent").style.display="",document.getElementById("newCopy").style.border=""),document.getElementById(t).style.top=p+"px",document.getElementById(t).style.left=u+"px",$("#"+t).removeClass("hide"),""!=this.astid&&this.lastid!=t&&this.hideMenu(this.lastid),this.navTimer=setTimeout("siteManager.hideMenu(siteManager.lastid);",2e4),this.lastid=t},findPosX:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetLeft,t=t.offsetParent;else t.x&&(e+=t.x);return e},findPosY:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetTop,t=t.offsetParent;else t.y&&(e+=t.y);return e},keepMenu:function(t){this.navTimer=setTimeout("hideMenu(lastid);",2e4),$("#"+t).removeClass("hide")},hideMenu:function(t){null!=this.navTimer&&clearTimeout(this.navTimer),$("#"+t).addClass("hide")},deleteDisplayObject:function(t){var e=document.getElementById("selectedObjects"+t),i=e.selectedIndex,a=e.options.length>1?e.options.length-1:0;0>i||(e.options[i]=null,this.updateDisplayObjectList(t),e.options.length&&(e.options[e.options.length-1].selected=!0))},updateDisplayObjectList:function(t){var e=document.getElementById("selectedObjects"+t),i=document.getElementById("objectList"+t);i.value="";for(var a=0;a<e.options.length;a++)""!=i.value?i.value+="^"+e.options[a].value:i.value=e.options[a].value},moveDisplayObjectUp:function(t){var e=document.getElementById("selectedObjects"+t),i=e.selectedIndex;if(!(1>i)){var a=document.createElement("option"),n=document.createElement("option");a.text=e.options[i].text,a.value=e.value,a.selected="selected",n.text=e.options[i-1].text,n.value=e.options[i-1].value,e[i-1]=a,e[i]=n,this.updateDisplayObjectList(t)}},moveDisplayObjectDown:function(t){var e=document.getElementById("selectedObjects"+t),i=e.selectedIndex;if(i!=e.length-1){var a=document.createElement("option"),n=document.createElement("option");a.text=e.options[i].text,a.value=e.options[i].value,a.selected="selected",n.text=e.options[i+1].text,n.value=e.options[i+1].value,e.options[i+1]=a,e.options[i]=n,this.updateDisplayObjectList(t)}},setTargetParams:function(t){var e=!isNaN(t.height.value)&&t.height.value>0?",height="+t.height.value:"",i=!isNaN(t.width.value)&&t.width.value>0?",width="+t.width.value:"",a=!isNaN(t.top.value)&&t.top.value>0?",top="+t.top.value:"",n=!isNaN(t.left.value)&&t.left.value>0?",left="+t.left.value:"",o=""!=t.toolbar.value?",toolbar="+t.toolbar.value:"",r=""!=t.location.value?",location="+t.location.value:"",s=""!=t.directories.value?",directories="+t.directories.value:"",d=""!=t.status.value?",status="+t.status.value:"",c=""!=t.menubar.value?",menubar="+t.menubar.value:"",l=""!=t.resizable.value?",resizable="+t.resizable.value:"",u=""!=t.copyhistory.value?",copyhistory="+t.copyhistory.value:"",p=""!=t.scrollbars.value?",scrollbars="+t.scrollbars.value:"";document.forms.contentForm.targetParams.value=o+r+s+d+c+l+u+p+i+e+a+n},loadSiteParents:function(t,e,i,a,n){$("#mover1").hide();var o="./",r="muraAction=cArch.siteParents&compactDisplay=true&siteid="+t+"&contentid="+e+"&parentid="+i+"&keywords="+a+"&isNew="+n+"&cacheid="+Math.random(),s=$("#mover2");$.get(o+"?"+r,function(t){$("#mover2").html(t),$("#mover2").show()})},loadAssocImages:function(t,e,i,a,n){var o="./",r="muraAction=cArch.assocImages&compactDisplay=true&siteid="+t+"&fileid="+e+"&contentid="+i+"&keywords="+a+"&isNew="+n+"&cacheid="+Math.random(),s=$("#selectAssocImage");$.get(o+"?"+r,function(t){$("#selectAssocImage").html(t),$("#selectAssocImageResults").slideDown()})},loadObjectClass:function(t,e,i,a,n,o){var r="./",s="muraAction=cArch.loadclass&compactDisplay=true&siteid="+t+"&classid="+e+"&subclassid="+i+"&contentid="+a+"&parentid="+n+"&cacheid="+Math.random(),d=$("#classList");return d.html('<div class="load-inline"></div>'),$("#classList .load-inline").spin(spinnerArgs2),$.get(r+"?"+s,function(t){$("#classList .load-inline").spin(!1),$("#classList").html(t),siteManager.availableObjectTemplate="",siteManager.availalbeObjectParams={},siteManager.availableObject={},siteManager.availableObjectValidate=function(){return!0}}),!1},getDisplayObjectClass:function(t){var e=$("#selectedObjects"+t).val().toString(),i=e.split("~");return i[0]},getDisplayObjectID:function(t){var e=$("#selectedObjects"+t).val().toString(),i=e.split("~");return i[2]},loadNotify:function(t,e,i){var a="./",n="muraAction=cArch.loadNotify&compactDisplay=true&siteid="+t+"&contentid="+e+"&parentid="+i+"&cacheid="+Math.random(),o=$("#selectNotify");return""==o.html()?(o.show(),o.html('<div class="load-inline"></div>'),$("#selectNotify .load-inline").spin(spinnerArgs2),$.get(a+"?"+n,function(t){$("#selectNotify .load-inline").spin(!1),$("#selectNotify").html(t)})):o.toggle(),!1},loadExpiresNotify:function(t,e,i){var a="./",n="muraAction=cArch.loadExpireNotify&compactDisplay=true&siteid="+t+"&contenthistid="+e+"&parentid="+i+"&cacheid="+Math.random(),o=$("#selectExpiresNotify");return""==o.html()?(o.show(),o.html('<div class="load-inline"></div>'),$("#selectExpiresNotify .load-inline").spin(spinnerArgs2),$.get(a+"?"+n,function(t){$("#selectExpiresNotify .load-inline").spin(!1),$("#selectExpiresNotify").html(t)})):o.toggle(),!1},bindDelete:function(){$("a.delete").click(function(){var t=$(this).parent().attr("data-contentid");$(this).parent().remove(),siteManager.setupRCResultIcon($('#selectRelatedContent button[value="'+t+'"]')),siteManager.updateBuckets(),siteManager.updateRCForm(),$("#mura-rc-quickedit").hide()})},bindMouse:function(){$(".rcSortable li.item:not(.empty), .rcDraggable li.item").mouseup(function(t){1==t.which&&(siteManager.enableBuckets(),$(window).unbind("mousemove"))}).mousedown(function(t){var e=!0;1==t.which&&(siteManager.disableBuckets($(this)),"undefined"!=typeof frontEndProxy&&$(window).bind("mousemove",function(t){e&&(frontEndProxy.post({cmd:"autoScroll",y:t.pageY}),e=!1)})),timer=window.setInterval(function(){e=!0},100)})},updateBuckets:function(){$(".rcSortable").each(function(t){1==$(this).find("li.item").length?$(this).find("li.empty").removeClass("noShow"):$(this).find("li.empty").addClass("noShow")})},enableBuckets:function(){$(".rcSortable").each(function(t){$(this).sortable("enable"),$(this).parent().removeClass("disabled")})},disableBuckets:function(t){$(".rcSortable").each(function(e){$(this).attr("id")!=t.parent().attr("id")&&($(this).attr("data-accept").length>0&&-1==$(this).attr("data-accept").indexOf(t.attr("data-content-type"))&&($(this).sortable("disable"),$(this).parent().addClass("disabled")),$(this).find('[data-contentid="'+t.attr("data-contentid")+'"]').length>0&&($(this).sortable("disable"),$(this).parent().addClass("disabled")))})},loadRelatedContent:function(t,e,i,a,n){var o="./",r="muraAction=cArch.loadRelatedContent&compactDisplay=true&contentid="+t+"&siteid="+e+"&isNew="+i+"&"+a+"&cacheid="+Math.random(),s=$("#selectRelatedContent");s.html('<div class="load-inline"></div>'),$("#selectRelatedContent .load-inline").spin(spinnerArgs2),$.get(o+"?"+r,function(a){-1!=a.indexOf("mura-primary-login-token")&&(location.href="./"),$("#selectRelatedContent .load-inline").spin(!1),$("#selectRelatedContent").html(a),$("#draggableContainmentInternal").on("scroll",function(){$("#mura-rc-quickedit").hide()}),$(".rcDraggable li.item").draggable({connectToSortable:".rcSortable",helper:"clone",revert:"invalid",appendTo:"body",start:function(t,e){$("#mura-rc-quickedit").hide(),siteManager.bindMouse()},zIndex:100}).disableSelection(),setDatePickers(".mura-relatedContent-datepicker",dtLocale,dtCh),$("#aAdvancedSearch").click(function(t){t.preventDefault(),$("#rcAdvancedSearch").slideToggle("fast")}),0==i&&1==n&&($("#rcAdvancedSearch").show(),$("#aAdvancedSearch").addClass("active")),siteManager.bindMouse(),setCheckboxTrees(),siteManager.setupRCQuikEdit(),$("#rcAdvancedSearch").find("ul.categories:not(.checkboxTrees)").css("margin-left","10px"),$(".mura-rc-quickoption").each(function(){siteManager.setupRCResultIcon($(this))}),$("#rcBtnSearch").click(function(i){i.preventDefault();var a=$("#rcAdvancedSearch").is(":visible"),n="#internalContent input";a&&(n="#selectRelatedContent input, #selectRelatedContent select"),$("#mura-rc-quickedit").hide(),siteManager.loadRelatedContent(t,e,0,$(n).serialize(),a)})})},loadRelatedContentSets:function(t,e,i,a,n){var o="./",r="muraAction=cArch.loadSelectedRelatedContent&compactDisplay=true&contenthistid="+e+"&type="+i+"&subtype="+a+"&siteid="+n+"&cacheid="+Math.random(),s=$("#selectedRelatedContent");s.html('<div class="load-inline"></div>'),$("#selectedRelatedContent .load-inline").spin(spinnerArgs2),$.get(o+"?"+r,function(e){-1!=e.indexOf("mura-primary-login-token")&&(location.href="./"),$("#selectedRelatedContent .load-inline").spin(!1),s.html(e),siteManager.setupRCSortable(t)})},setupRCResultIcon:function(t){$("#selectedRelatedContent").find('li[data-contentid="'+t.val()+'"]').length?t.find("i").attr("class","icon-ok-sign"):t.find("i").attr("class","icon-plus-sign")},setupRCQuikEdit:function(){$(".mura-rc-quickoption").each(function(){$(this).unbind("on").on("click",function(){var t=$(this).val(),e=$("#selectRelatedContent").find('li[data-contentid="'+t+'"]');$("#mura-rc-quickedit").show(),$("#mura-rc-quickedit").offset({top:$(this).offset().top}),$(".mura-rc-quickassign").each(function(){var i=this,a=$("#rcSortable-"+$(i).val()),n=function(){return a.find('li[data-contentid="'+t+'"]').length};$("#mura-rc-quickedit").show(),$(i).attr("disabled",!1),a.attr("id")!=e.parent().attr("id")&&a.attr("data-accept").length>0&&-1==a.attr("data-accept").indexOf(e.attr("data-content-type"))&&$(i).attr("disabled",!0),$(this).unbind("change"),$(this).prop("checked",n()),$(this).on("change",function(){$(this).prop("checked")?(e.clone().appendTo($("#rcSortable-"+$(i).val())),$("#rcSortable-"+$(i).val()).find(".mura-rc-quickoption").remove(),$("#rcSortable-"+$(i).val()).find('li[data-contentid="'+t+'"]').append('<a class="delete"></a>')):$("#rcSortable-"+$(i).val()).find('li[data-contentid="'+t+'"]').remove(),siteManager.setupRCResultIcon($('#selectRelatedContent button[value="'+t+'"]')),siteManager.updateBuckets(),siteManager.bindDelete(),siteManager.bindMouse(),siteManager.updateRCForm()})})})})},setupRCSortable:function(t){$(".rcSortable").sortable({connectWith:".rcSortable",revert:!0,update:function(t,e){siteManager.updateBuckets(),0==e.item.find("a.delete").length&&e.item.append('<a class="delete"></a>'),siteManager.bindDelete(),siteManager.bindMouse(),siteManager.setDirtyRelatedContent(),siteManager.updateRCForm(),siteManager.setupRCResultIcon($('#selectRelatedContent button[value="'+e.item.attr("data-contentid")+'"]'))},cancel:"li.empty"}).disableSelection(),siteManager.loadRelatedContent(t,siteid,1,"",!1),siteManager.bindDelete(),siteManager.bindMouse(),siteManager.updateRCForm(),siteManager.setupRCQuikEdit()},updateRCForm:function(){var t=new Array;$(".rcSortable").each(function(){var e=new Array,i=new Object;$(this).find(".mura-rc-quickoption").remove(),$(this).find("li.item:not(.empty)").each(function(){"undefined"==typeof $(this).attr("data-url")?e.push($(this).attr("data-contentid")):e.push({title:$(this).attr("data-title"),url:$(this).attr("data-url"),contentid:$(this).attr("data-contentid")})}),i.relatedcontentsetid=$(this).attr("data-relatedcontentsetid"),i.items=e,t.push(i)}),$("#relatedContentSetData").val(JSON.stringify(t))},setDirtyRelatedContent:function(){this.dirtyRelatedContent=!0},form_is_modified:function(t){for(var e=0;e<t.elements.length;e++){var i=t.elements[e],a=i.type;if("checkbox"==a||"radio"==a){if(i.checked!=i.defaultChecked)return!0}else if(("hidden"==a||"password"==a||"text"==a||"textarea"==a)&&i.value!=i.defaultValue&&"sdContent"!=i.name)return!0}if("undefined"!=typeof FCKeditorAPI){if(FCKeditorAPI.GetInstance("body")&&FCKeditorAPI.GetInstance("body").IsDirty())return!0;if(FCKeditorAPI.GetInstance("summary")&&FCKeditorAPI.GetInstance("summary").IsDirty())return!0;if(this.dirtyRelatedContent)return!0}else if("undefined"!=typeof CKEDITOR&&"undefined"!=typeof CKEDITOR.instances.body){var n=CKEDITOR.instances.body;if(n.checkDirty())return!0}return!1},copyThis:function(t,e,i){var a="./",n="muraAction=cArch.saveCopyInfo&siteid="+t+"&contentid="+e+"&copyAll="+i+"&cacheid="+Math.random();$.get(a+"?"+n),this.copyContentID=e,this.copySiteID=t,this.copyAll=i,this.hideMenu("newContentMenu")},pasteThis:function(t){var e="./",i="muraAction=cArch.copy&compactDisplay=true&siteid="+this.copySiteID+"&copyAll="+this.copyAll+"&contentid="+this.copyContentID+"&parentid="+t+"&cacheid="+Math.random(),a=$("#newPasteLink");a.css("background","url(assets/images/ajax-loader.gif) no-repeat 1px 5px;"),this.reloadURL=$("#newZoomLink").attr("href"),actionModal(function(){$.get(e+"?"+i,function(e){$("#action-modal").remove(),siteManager.loadSiteManagerInTab(function(){siteManager.loadSiteManager(siteManager.copySiteID,t,"00000000000000000000000000000000000","","","",1)})})})},reloadPage:function(){""==reloadURL?window.location.reload():location.href=this.reloadURL},loadExtendedAttributes:function(t,e,i,a,n,o,r){var s="./",d="muraAction=cArch.loadExtendedAttributes&contentHistID="+e+"&type="+i+"&subType="+a+"&siteID="+n+"&tablist="+siteManager.tablist+"&cacheid="+Math.random();return siteID=n,context=o,themeAssetPath=r,$(".extendset-container").each(function(){""!=$(this).html()&&($(this).html('<div class="load-inline"></div>'),$(this).find(".load-inline").spin(spinnerArgs2))}),siteManager.loadRelatedContentSets(t,e,i,a,n),$.ajax({url:s+"?"+d,dataType:"text",success:function(t){siteManager.setExtendedAttributes(t)}}),!1},setExtendedAttributes:function(data){var r=eval("("+data+")");$.each(r,function(t,e){$("#extendset-container-"+t+" .load-inline").spin(!1),$("#extendset-container-"+t).html(e)}),""==r["default"]?$("#tabExtendedAttributesLI").addClass("hide"):$("#tabExtendedAttributesLI").removeClass("hide"),r.hasconfigurator?$("#tabListDisplayOptionsLI").removeClass("hide"):$("#tabListDisplayOptionsLI").addClass("hide"),r.hassummary?"undefined"!=typeof showSummaryEditor&&showSummaryEditor():"undefined"!=typeof hideSummaryEditor&&hideSummaryEditor(),r.hasbody?"undefined"!=typeof showBodyEditor&&showBodyEditor():"undefined"!=typeof hideBodyEditor&&hideBodyEditor(),r.hasassocfile?$("#assocFileContainer").show():($("#assocFileContainer").hide(),$("input[name='newfile']").val("")),this.checkExtendSetTargeting(),setHTMLEditors(context,themeAssetPath),setDatePickers(".tab-content .datepicker",dtLocale),setColorPickers(".tab-content .colorpicker"),setFinders(".tab-content .mura-ckfinder"),setToolTips(".tab-content"),setFileSelectors()},checkExtendSetTargeting:function(){var t=$(".extendset"),e=!1,i=!1,a=!0;if(t.length){for(var n=0;n<t.length;n++){var o=t[n];if(void 0!=o.getAttribute("categoryid")&&""!=o.getAttribute("categoryid")){if(!i){var r=$("categoryContainer").getElementsByTagName("select");i=!0}for(var s=0;s<r.length;s++){var d=r[s],c=r[s].getAttribute("categoryid"),l=o.getAttribute("categoryid");!e&&null!=c&&l.indexOf(c)>-1&&(e=!0,membership=d.value)}e&&""!=membership?(this.setFormElementsDisplay(o,""),o.style.display="",a=!1):(this.setFormElementsDisplay(o,"none"),o.style.display="none")}else this.setFormElementsDisplay(o,""),o.style.display="",a=!1;e=!1}a?($("#extendMessage").show(),$("#extendDL").hide()):($("#extendMessage").hide(),$("#extendDL").show())}},resetExtendedAttributes:function(t,e,i,a,n,o){var r=i.split("^");this.loadExtendedAttributes(t,e,r[0],r[1],a,n,o),document.contentForm.type.value=r[0],document.contentForm.subtype.value=r[1]},setFormElementsDisplay:function(t,e){var i=t.getElementsByTagName("input");if(i.length)for(var a=0;a<i.length;a++)i[a].style.display=e;if(i=t.getElementsByTagName("textarea"),i.length)for(var a=0;a<i.length;a++)i[a].style.display=e;if(i=t.getElementsByTagName("select"),i.length)for(var a=0;a<i.length;a++)i[a].style.display=e},loadCategoryFeatureStartStop:function(t,e,i){var a=$("#"+t);if(a.html().length>10)a.toggle();else if(1==e){var n="./",o=t,r="muraAction=cArch.loadCategoryFeatureStartStop&id="+o.replace(/editDates/,"")+"&siteID="+i+"&cacheid="+Math.random();a.show(),$.get(n+"?"+r,function(e){$("#"+t).html(e),setDatePickers("#"+t+" .datepicker",dtLocale),setToolTips("#"+t)})}},activeQuickEdit:!1,loadSiteManager:function(siteid,topid,moduleid,sortby,sortdirection,ptype,startrow){var url="./",pars="muraAction=cArch.loadSiteManager&siteid="+siteid+"&topid="+topid+"&moduleid="+moduleid+"&sortby="+sortby+"&sortdirection="+sortdirection+"&ptype="+ptype+"&startrow="+startrow+"&cacheid="+Math.random();$("#newContentMenu").addClass("hide");var d=$("#gridContainer");return this.activeQuickEdit||(d.html('<div class="load-inline"></div>').show(),$("#gridContainer .load-inline").spin(spinnerArgs2)),$.ajax({url:url+"?"+pars,dataType:"text",success:function(data){try{var r=eval("("+data+")");siteManager.activeQuickEdit||(d.hide(),$("#gridContainer .load-inline").spin(!1)),d.html(r.html),$("#newContentMenu").addClass("hide"),stripe("stripe"),siteManager.initQuickEdits(),initDraftPrompt(),setToolTips("#gridContainer"),"editor"==r.perm.toLowerCase()&&"orderno"==r.sortby.toLowerCase()&&($("#sortableKids").sortable({stop:function(t,e){stripe("stripe"),siteManager.setAsSorted(),$(e.item).removeClass("ui-draggable-dragging")},start:function(t,e){$(e.item).addClass("ui-draggable-dragging")}}),$("#sortableKids").disableSelection())}catch(err){-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),d.html(data)}siteManager.activeQuickEdit||d.hide().animate({opacity:"show"},1e3),siteManager.activeQuickEdit=!1},error:function(t,e,i){console.log("error "+e)}}),!1},sectionLoading:!1,loadSiteFlatByFilter:function(){var t=$("#contentTypeFilter").val();if(""!=t){var e=t.split("^");flatViewArgs.type=e[0],flatViewArgs.subtype=e[1]}else flatViewArgs.type="",flatViewArgs.subtype="";var i=[];$(".categories :checked").each(function(){i.push($(this).val())}),flatViewArgs.categoryid=i.toString();var a=[];if($("input[name='tags']").each(function(){a.push($(this).val())}),flatViewArgs.tags=a.toString(),customtaggroups.length)for(var n=0;n<customtaggroups.length;n++)a=[],$("input[name='"+customtaggroups[n]+"tags']").each(function(){$(this).val().length&&a.push($(this).val())}),flatViewArgs[customtaggroups[n]+"tags"]=a.toString();flatViewArgs.keywords=$("#contentKeywords").val(),flatViewArgs.page=1,flatViewArgs.filtered=!0,this.loadSiteFlat(flatViewArgs)},loadSiteManagerInTab:function(t){return archViewLoaded=!0,window.scrollTo(0,0),$("#gridContainer").html('<div class="load-inline"></div>'),$('#viewTabs a[href="#tabArchitectural"]').tab("show"),t(),!1},loadSiteFlat:function(args){var url="./",pars="muraAction=cArch.loadSiteFlat&cacheid="+Math.random(),d=$("#flatViewContainer");return d.html('<div class="load-inline"></div>'),$("#flatViewContainer .load-inline").spin(spinnerArgs2),$("#newContentMenu").addClass("hide"),$.post(url+"?"+pars,args,function(data){if(-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),$("#flatViewContainer .load-inline").spin(!1),d.html(data),stripe("stripe"),setCheckboxTrees(),setToolTips(".mura-table-grid"),$.ajax({url:"?muraAction=carch.loadtagarray&siteid="+siteid,dataType:"text",success:function(data){var tagArray=eval("("+data+")");$("#tags").tagSelector(tagArray,"tags")}}),customtaggroups.length)for(var g=0;g<customtaggroups.length;g++)window[customtaggroups[g]]?$("#"+customtaggroups[g]+"tags").tagSelector(window[customtaggroups[g]],customtaggroups[g]+"tags"):$.ajax({url:"?muraAction=carch.loadtagarray&siteid="+siteid+"&taggroup="+customtaggroups[g],context:{taggroup:customtaggroups[g]},dataType:"test",success:function(data){window[this.taggroup]=eval("("+data+")"),$("#"+this.taggroup+"tags").tagSelector(window[this.taggroup],this.taggroup+"tags")}});$(".navSort a").click(function(t){t.preventDefault(),$(".sortNav .active").toggleClass("active"),$(this).toggleClass("active");var e=$(this).attr("data-sortby");if(e==flatViewArgs.sortby)"asc"==flatViewArgs.sortdirection?flatViewArgs.sortdirection="desc":flatViewArgs.sortdirection="asc";else switch(flatViewArgs.sortby=e,flatViewArgs.sortby){case"menutitle":flatViewArgs.sortdirection="asc";break;case"created":case"lastupdate":case"releasedate":flatViewArgs.sortdirection="desc"}flatViewArgs.page=1,siteManager.loadSiteFlat(flatViewArgs)}),$("#navReports a").click(function(t){t.preventDefault(),$(".navReports .active").toggleClass("active"),$(this).toggleClass("active");var e=$(this).attr("data-report");"mylockedfiles"!=flatViewArgs.report&&"lockedfiles"!=flatViewArgs.report||"mylockedfiles"==e||"lockedfiles"==e||(flatViewArgs.type=""),flatViewArgs.report=e,("mylockedfiles"==flatViewArgs.report||"lockedfiles"==flatViewArgs.report)&&(flatViewArgs.type="File"),flatViewArgs.page=1,siteManager.loadSiteFlat(flatViewArgs)}),$("#tabFlat .moreResults a").click(function(t){t.preventDefault(),$("#tabFlat .moreResults a").toggleClass("active"),$(this).toggleClass("active"),flatViewArgs.page=$(this).attr("data-page"),siteManager.loadSiteFlat(flatViewArgs)}),initDraftPrompt(),d.hide().animate({opacity:"show"},1e3)}),!1},loadSiteSection:function(node,startrow){var clearTimer=function(){$("#mura-section-loading").spin(!1),$("#mura-section-loading").remove(),$("#mura-grid-loader").remove(),clearTimeout(startTimer)};if(clearTimer(),!this.sectionLoading){this.sectionLoading=!0;var url="./",pars="muraAction=cArch.loadSiteSection&siteid="+node.attr("data-siteid")+"&contentID="+node.attr("data-contentid")+"&moduleid="+node.attr("data-moduleid")+"&sortby="+node.attr("data-sortby")+"&sortdirection="+node.attr("data-sortdirection")+"&ptype="+node.attr("data-type")+"&startrow="+startrow+"&cacheid="+Math.random(),icon=node.find("span:first");if(icon.hasClass("hasChildren closed")){var startTimer=setTimeout(function(){$("body").prepend('<div id="mura-section-loading" class="spinner-wrap"></div>'),$(".mura-grid").prepend('<div id="mura-grid-loader"></div>'),$("#mura-section-loading").spin(spinnerArgs3)},1e3);icon.removeClass("hasChildren closed"),icon.addClass("hasChildren open"),$.ajax({url:url+"?"+pars,dataType:"text",success:function(data){try{var r=eval("("+data+")");node.find(".mura-section:first").remove(),node.append(r.html),$("#newContentMenu").addClass("hide"),stripe("stripe"),initDraftPrompt(),siteManager.initQuickEdits(),document.all&&document.querySelector&&!document.addEventListener||node.find(".mura-section:first").hide().fadeIn("slow")}catch(err){-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),node.append(data)}clearTimer(),siteManager.sectionLoading=!1}})}else icon.removeClass("hasChildren open"),icon.addClass("hasChildren closed"),$.get(url+"?"+pars),node.find(".mura-section:first").fadeOut("fast",function(){node.find(".mura-section:first").remove(),stripe("stripe"),$("#newContentMenu").addClass("hide"),siteManager.sectionLoading=!1})}return!1},refreshSiteSection:function(node,startrow){if(!this.sectionLoading){this.sectionLoading=!0;var url="./",pars="muraAction=cArch.refreshSiteSection&siteid="+node.attr("data-siteid")+"&contentID="+node.attr("data-contentid")+"&moduleid="+node.attr("data-moduleid")+"&sortby="+node.attr("data-sortby")+"&sortdirection="+node.attr("data-sortdirection")+"&ptype="+node.attr("data-type")+"&startrow="+startrow+"&cacheid="+Math.random();$.ajax({url:url+"?"+pars,dataType:"text",success:function(data){try{var r=eval("("+data+")");node.find(".mura-section:first").remove(),node.append(r.html),$("#newContentMenu").addClass("hide"),stripe("stripe"),initDraftPrompt(),siteManager.initQuickEdits()}catch(err){-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),node.append(data)}siteManager.activeQuickEdit=!1,siteManager.sectionLoading=!1}})}return!1},setAsSorted:function(){$("#sorted").val("true"),$("#sitemgr-reorder").fadeIn()},initQuickEdits:function(){$(".mura-quickEditItem").click(function(t){if(t.preventDefault(),$(this).data("clicked",!$(this).data("clicked")),$(this).data("clicked")){if(!this.activeQuickEdit){var e=$(this).attr("data-attribute"),i=$(this).parents("li:first"),a="./",n="muraAction=cArch.loadQuickEdit&siteid="+siteid+"&contentID="+i.attr("data-contentid")+"&attribute="+e+"&cacheid="+Math.random();$("#mura-quickEditor").remove(),$("#selected").attr("id",""),$("#selectedIcon").attr("id","").attr("src","assets/images/icons/template_24x24.png"),$(this).parent().prepend(quickEditTmpl);var o=$("#mura-quickEditor"),r=o.parents("dd:first");r.attr("id","selected"),$.get(a+"?"+n,function(t){if(-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#mura-quickEditor").html(t),$("#mura-quickEditor").find("input, select").bind("mousedown.ui-disableSelection selectstart.ui-disableSelection",function(t){t.stopImmediatePropagation()}),
setDatePickers(".mura-quickEdit-datepicker",dtLocale,dtCh),setToolTips(".mura-quickEdit-datepicker"),$("#hasDraftsMessage").length&&r.addClass("hasDraft"),"template"==e){var i=r.find("img:first");i.length&&i.attr("id","selectedIcon").attr("src","assets/images/icons/template_24x24-on.png")}})}}else siteManager.closeQuickEdit()})},saveQuickEdit:function(){this.activeQuickEdit=!0;var t=$("#mura-quickEditor").parent().find(".mura-quickEditItem:first").attr("data-attribute"),e=$("#mura-quickEditor").parents("li:first"),i="./",a={muraAction:"cArch.saveQuickEdit",siteID:siteID,contentID:e.attr("data-contentid"),attribute:t};if("isnav"==t)var n={isnav:$("#mura-quickEdit-isnav").val()};else if("inheritObjects"==t)var n={inheritObjects:$("#mura-quickEdit-inheritobjects").val()};else if("template"==t)var n={template:$("#mura-quickEdit-template").val(),childTemplate:$("#mura-quickEdit-childtemplate").val()};else if("display"==t)var n={display:$("#mura-quickEdit-display").val(),displayStop:$("#mura-quickEdit-displayStop").val(),displayStart:$("#mura-quickEdit-displayStart").val()};var o=$.extend({},a,n);$("#mura-quickEditor").html('<img class="loader" src="assets/images/ajax-loader-alt.gif" />'),$.ajax({type:"POST",url:"./index.cfm?"+e.attr("data-csrf"),data:o,success:function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./");var i=e.parents("li:first");if(i.parents("li:first").length)siteManager.refreshSiteSection(i,1);else{var a=$("#top-node").parents("li:first");siteManager.loadSiteManager(a.attr("data-siteid"),a.attr("data-contentid"),a.attr("data-moduleid"),a.attr("data-sortby"),a.attr("data-sortdirection"),a.attr("data-type"),1)}},error:function(t,e,i){alert(t.responseText)},dataType:"text"})},closeQuickEdit:function(){$("#selected").attr("id",""),$("#selectedIcon").attr("id","").attr("src","assets/images/icons/template_24x24.png"),$(".mura-quickEdit").remove()},initCategoryAssignments:function(){$(".mura-quickEditItem").click(function(t){if(t.preventDefault(),$(this).data("clicked",!$(this).data("clicked")),$(this).data("clicked")){var e=$(this).parents("li:first"),i=e.attr("data-cattrim"),a={muraAction:"cArch.loadCategoryAssignment",cattrim:e.attr("data-cattrim"),siteID:e.attr("data-siteid"),categoryID:e.attr("data-categoryid"),categoryAssignment:$("#categoryAssign"+i).val(),featureStart:"",startHour:"",startMinute:"",startDayPart:"",featureStop:"",stopHour:"",stopMinute:"",stopDayPart:""};"2"==a.categoryAssignment&&$.extend(a,{featureStart:$("#featureStart"+i).val(),startHour:$("#startHour"+i).val(),startMinute:$("#startMinute"+i).val(),startDayPart:$("#startDayPart"+i).val(),featureStop:$("#featureStop"+i).val(),stopHour:$("#stopHour"+i).val(),stopMinute:$("#stopMinute"+i).val(),stopDayPart:$("#stopDayPart"+i).val()}),$("#mura-quickEditor").remove(),$("#selected").attr("id",""),$("#selectedIcon").attr("id","").attr("src","assets/images/icons/template_24x24.png"),$(this).parent().prepend(quickEditTmpl);var n=$("#mura-quickEditor"),o=n.parents("dd:first");o.attr("id","selected"),$.ajax({type:"POST",url:"./index.cfm",data:a,success:function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#mura-quickEditor").html(t),setDatePickers(".mura-quickEdit-datepicker",dtLocale,dtCh),setToolTips(".mura-quickEdit-datepicker")},error:function(t,e,i){alert(i)},dataType:"text"})}else siteManager.closeQuickEdit()})},saveCategoryAssignment:function(){var t=$("#mura-quickEdit-cattrim").val(),e={muraAction:"cArch.loadCategoryFeatureStartStop",cattrim:t,categoryAssignment:$("#mura-quickEdit-display").val(),featureStart:$("#mura-quickEdit-featureStart").val(),startHour:$("#mura-quickEdit-startHour").val(),startMinute:$("#mura-quickEdit-startMinute").val(),startDayPart:$("#mura-quickEdit-startDayPart").length?$("#mura-quickEdit-startDayPart").val():"",featureStop:$("#mura-quickEdit-featureStop").val(),stopHour:$("#mura-quickEdit-stopHour").val(),stopMinute:$("#mura-quickEdit-stopMinute").val(),stopDayPart:$("#mura-quickEdit-stopDayPart").length?$("#mura-quickEdit-stopDayPart").val():"",siteid:siteid};$("#mura-quickEditor").html('<img class="loader" src="assets/images/ajax-loader-alt.gif" />'),$.ajax({type:"POST",url:"./index.cfm",data:e,success:function(e){-1!=e.indexOf("mura-primary-login-token")&&(location.href="./"),$("#categoryLabelContainer"+t).html(e),siteManager.closeCategoryAssignment(),setToolTips(".mura-quickEdit-datepicker"),siteManager.initCategoryAssignments()},error:function(t,e,i){alert(i)},dataType:"text"})},closeCategoryAssignment:function(){$("#selected").attr("id",""),$(".mura-quickEdit").remove()},availableObjectTemplate:"",availalbeObjectParams:{},availableObject:{},availableObjectValidate:function(){return!0},getDisplayObjectConfig:function(t){var e=$("#selectedObjects"+t),i=e.val().toString(),a=i.split("~"),n={};return n.object=a[0],n.name=a[1],n.objectid=a[2],a.length>3&&(n.params=a[3]),n.regionid=t,n.context=context,n.siteid=siteid,n.contentid=contentid,n.contenthistid=contenthistid,n.parentid=parentid,n},addDisplayObject:function(objectToAdd,regionid,configure){var tmpObject="",tmpValue="",tmpText="",isUpdate=!1;if("string"==typeof objectToAdd){if(null==document.getElementById(objectToAdd))return alertDialog("Please select a display object."),!1;if("select"==document.getElementById(objectToAdd).tagName.toLowerCase()){if(-1==document.getElementById(objectToAdd).selectedIndex)return alertDialog("Please select a display object."),!1;var addIndex=document.getElementById(objectToAdd).selectedIndex;if(0>addIndex)return!1;var addoption=document.getElementById(objectToAdd).options[addIndex];tmpText=addoption.text,tmpValue=addoption.value}else if("input"==document.getElementById(objectToAdd).tagName.toLowerCase()){var addoption=document.getElementById(objectToAdd);tmpValue=addoption.value}else addoption=document.getElementById(objectToAdd);try{tmpObject=eval("("+addoption.value+")")}catch(err){tmpObject=addoption.value}}else tmpObject=objectToAdd;var checkSelection=!1;if("object"==typeof tmpObject){if(tmpObject.regionid=regionid,tmpObject.context=context,tmpObject.siteid=siteid,tmpObject.contentid=contentid,tmpObject.contenthistid=contenthistid,tmpObject.parentid=parentid,"feed"==tmpObject.object){if(configure&&(tmpObject.regionid=regionid,this.initFeedConfigurator(tmpObject)))return!1;checkSelection=!0}if("feed_slideshow"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initSlideShowConfigurator(tmpObject),!1;checkSelection=!0}if("tag_cloud"==tmpObject.object&&customtaggroups.length){if(configure)return tmpObject.regionid=regionid,this.initTagCloudConfigurator(tmpObject),!1;checkSelection=!0}if(allowopenfeeds&&"category_summary"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initCategorySummaryConfigurator(tmpObject),!1;checkSelection=!0}if("related_content"==tmpObject.object||"related_section_content"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initRelatedContentConfigurator(tmpObject),!1;checkSelection=!0}if("site_map"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initSiteMapConfigurator(tmpObject),!1;checkSelection=!0}if("plugin"==tmpObject.object){var configurator=this.getPluginConfigurator(tmpObject.objectid);if(""!=configurator){if(configure)return window[configurator](tmpObject),!1;checkSelection=!0}}if(tmpValue=tmpObject.object,tmpValue=tmpValue+"~"+tmpObject.name,tmpValue=tmpValue+"~"+tmpObject.objectid,"string"==typeof tmpObject.params?tmpValue=tmpValue+"~"+tmpObject.params:"object"==typeof tmpObject.params&&(tmpValue=tmpValue+"~"+JSON.stringify(tmpObject.params)),checkSelection&&-1!=document.getElementById("selectedObjects"+regionid).selectedIndex){var currentSelection=this.getDisplayObjectConfig(regionid);currentSelection&&currentSelection.objectid==tmpObject.objectid&&(isUpdate=!0)}tmpText=tmpObject.name}if(""==tmpValue)return alertDialog("Please select a display object."),!1;var selectedObjects=document.getElementById("selectedObjects"+regionid);if(selectedObjects.options.length)for(var i=0;i<selectedObjects.options.length;i++)if(selectedObjects.options[i].value==tmpValue)return selectedObjects.selectedIndex=i,!1;if(isUpdate)myoption=selectedObjects.options[document.getElementById("selectedObjects"+regionid).selectedIndex],myoption.text=tmpText,myoption.value=tmpValue;else{var myoption=document.createElement("option");selectedObjects.appendChild(myoption),myoption.text=tmpText,myoption.value=tmpValue,myoption.selected="selected"}return this.updateDisplayObjectList(regionid),!0},initTagCloudConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=tag_cloud&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&cacheid="+Math.random(),title:tagCloudConfiguratorTitle}),!0},initSiteMapConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=site_map&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&cacheid="+Math.random(),title:siteMapConfiguratorTitle}),!0},initCategorySummaryConfigurator:function(t){return"undefined"!=typeof t.object&&"category_summary"!=t.object?!1:(this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=category_summary&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&cacheid="+Math.random(),title:categorySummaryConfiguratorTitle}),!0)},initFeedConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=feed&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&feedid="+t.objectid+"&cacheid="+Math.random(),title:"Loading...",init:function(t,e){"remote"==t.type.toLowerCase()?"frontEnd"==siteManager.configuratorMode?$("#configuratorHeader").html(remoteFeedConfiguratorTitle):$("#configuratorContainer").dialog("option","title",remoteFeedConfiguratorTitle):"frontEnd"==siteManager.configuratorMode?$("#configuratorHeader").html(localIndexConfiguratorTitle):$("#configuratorContainer").dialog("option","title",localIndexConfiguratorTitle),$("#availableListSort").length&&$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each(function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$.trim($(this).html())):$("#displayList").val($.trim($(this).html()))}),siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initSlideShowConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=feed_slideshow&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&feedid="+t.objectid+"&cacheid="+Math.random(),title:slideShowConfiguratorTitle,init:function(t,e){$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each(function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$(this).html()):$("#displayList").val($(this).html())}),siteManager.vupdateAvailableObject()}}).disableSelection()}}),!0},initRelatedContentConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid="+t.object+"&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&cacheid="+Math.random(),title:relatedContentConfiguratorTitle,init:function(t,e){$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each(function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$(this).html()):$("#displayList").val($(this).html())}),siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initGenericConfigurator:function(t){return this.resetAvailableObject(),this.resetConfiguratorContainer(),$("#configuratorContainer").dialog({resizable:!0,modal:!0,title:genericConfiguratorTitle,position:getDialogPosition(),buttons:{Cancel:function(){$(this).dialog("close")}},open:function(){$("#configurator").html('<div class="ui-dialog-content ui-widget-content">'+genericConfiguratorMessage+"</div>")},close:function(){$(this).dialog("destroy")}}),!0},updateAvailableObject:function(){var t={};$("#availableObjectParams").find(".objectParam").each(function(){var e=$(this);if("radio"!=e.attr("type")&&"checkbox"!=e.attr("type")||("radio"==e.attr("type")||"checkbox"==e.attr("type"))&&e.is(":checked"))if("undefined"==typeof t[e.attr("name")])t[e.attr("name")]=e.val();else{if(!$.isArray(t[e.attr("name")])){var i=[];i[0]=t[e.attr("name")],t[e.attr("name")]=i}t[e.attr("name")].push(e.val())}}),this.availableObject=$.extend({},this.availableObjectTemplate),this.availableObject.params=t},initDisplayObjectConfigurators:function(){$(".displayRegions").dblclick(function(){var t=$(this).attr("data-regionid"),e=siteManager.getDisplayObjectConfig(t);if("feed"==e.object)siteManager.initFeedConfigurator(e);else if("feed_slideshow"==e.object)siteManager.initSlideShowConfigurator(e);else if("tag_cloud"==e.object&&customtaggroups.length)siteManager.initTagCloudConfigurator(e);else if(allowopenfeeds&&"category_summary"==e.object)siteManager.initCategorySummaryConfigurator(e);else if("site_map"==e.object)siteManager.initSiteMapConfigurator(e);else if("related_content"==e.object||"related_section_content"==e.object)siteManager.initRelatedContentConfigurator(e);else if("plugin"==e.object){var i=siteManager.getPluginConfigurator(e.objectid);""!=i&&window[i](e)}else siteManager.initGenericConfigurator(e)})},resetAvailableObject:function(){this.availableObjectTemplate="",this.availableObject={},this.availableObjectValidate=function(){return!0}},resetConfiguratorContainer:function(){$("#configuratorContainer").remove(),$("body").append('<div id="configuratorContainer" title="Loading..." style="display:none"><div id="configurator"><div class="load-inline"></div></div></div>'),$("#configuratorContainer .load-inline").spin(spinnerArgs2)},initConfiguratorParams:function(){this.updateAvailableObject(),$("#availableObjectParams").find(".objectParam").bind("change",function(){siteManager.updateAvailableObject()})},setContentDisplayListSort:function(){$("#contentAvailableListSort, #contentDisplayListSort").sortable({connectWith:".contentDisplayListSortOptions",update:function(t){t.stopPropagation(),$("#contentDisplayList").val(""),$("#contentDisplayListSort > li").each(function(){var t=$("#contentDisplayList").val();""!=t?$("#contentDisplayList").val(t+","+$.trim($(this).html())):$("#contentDisplayList").val($.trim($(this).html()))})}}).disableSelection()},configuratorMode:"backEnd",initConfigurator:function(data,config){return this.resetAvailableObject(),"undefined"!=typeof config.validate&&(this.availableObjectValidate=config.validate),data.configuratorMode=this.configuratorMode,"undefined"==typeof data.object?!1:("backEnd"==this.configuratorMode&&(this.resetConfiguratorContainer(),$("#configuratorContainer").dialog({resizable:!0,modal:!0,width:600,position:getDialogPosition(),buttons:{Save:function(){siteManager.updateAvailableObject(),siteManager.availableObjectValidate(data.params)&&(siteManager.addDisplayObject(siteManager.availableObject,data.regionid,!1),"undefined"!=typeof config.destroy&&config.destroy(data,config),$(this).dialog("destroy"))},Cancel:function(){"undefined"!=typeof config.destroy&&config.destroy(data,config),$(this).dialog("destroy")}},close:function(){"undefined"!=typeof config.destroy&&config.destroy(data,config),$(this).dialog("destroy")}})),$.ajax({url:config.url+"?"+config.pars,dataType:"text",data:data,type:"post",success:function(_resp){try{resp=eval("("+_resp+")")}catch(err){-1!=_resp.indexOf("mura-primary-login-token")&&(location.href="./"),resp=_resp}if("object"==typeof resp?$("#configurator").html(resp.html):"xml"==typeof resp?$("#configurator").html(resp.toString()):$("#configurator").html(resp),"frontEnd"==siteManager.configuratorMode?$("#configuratorHeader").html(config.title):$("#configuratorContainer").dialog("option","title",config.title),""==siteManager.availableObjectTemplate){var availableObjectContainer=$("#availableObjectParams");siteManager.availableObjectTemplate={object:availableObjectContainer.attr("data-object"),objectid:availableObjectContainer.attr("data-objectid"),name:availableObjectContainer.attr("data-name")},siteManager.availableObject=$.extend({},siteManager.availableObjectTemplate)}"undefined"!=typeof config.init&&("object"==typeof resp&&(data=$.extend(data,resp)),config.init(data,config)),siteManager.layoutmanager&&$("#configuratorPreview").html("testing"),"backEnd"==siteManager.configuratorMode?$("#configuratorContainer").dialog("option","position",getDialogPosition()):"frontEnd"==siteManager.configuratorMode&&($("#actionButtons").show(),$("#configuratorNotices").show())}}),!0)},getPluginConfigurator:function(t){for(var e=0;e<pluginConfigurators.length;e++)if(pluginConfigurators[e].objectid==t)return pluginConfigurators[e].init;return""},openContentDiff:function(t,e,i){return $("#contentDiffContainer").remove(),$("body").append('<div id="contentDiffContainer" title="Loading..." style="display:none"><div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div></div>'),$("#contentDiffContainer .load-inline").spin(spinnerArgs2),$("#contentDiffContainer").dialog({resizable:!1,modal:!0,width:750,title:"Code & Attribute Diff",position:getDialogPosition(),open:function(){$("#contentDiffContainer").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>');var a="./index.cfm",n="muraAction=cArch.loaddiff&compactDisplay=true&siteid="+i+"&contenthistid1="+t+"&contenthistid2="+e+"&cacheid="+Math.random();$.ajax(a+"?"+n).done(function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#contentDiffContainer .load-inline").spin(!1),$("#contentDiffContainer").html(t),$("#contentDiffContainer").dialog("option","position","center"),$(".ui-widget-overlay").css("height",$(document).height())}).fail(function(t){-1!=t.responseText.indexOf("mura-primary-login-token")&&(location.href="./"),$("#contentDiffContainer .load-inline").spin(!1),$("#contentDiffContainer").html(t.responseText),$("#contentDiffContainer").dialog("option","position","center")})},close:function(){$(this).dialog("destroy"),$("#contentDiffContainer").remove()}}),!1}};quickEditTmpl='<div class="mura-quickEdit" id="mura-quickEditor">',quickEditTmpl+='<img class="loader" src="assets/images/ajax-loader-alt.gif" />',quickEditTmpl+="</div>",$(document).ready(function(){siteManager.initDisplayObjectConfigurators()});